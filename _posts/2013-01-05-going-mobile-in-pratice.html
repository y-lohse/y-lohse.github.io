---
layout: post
title: Going mobile - in pratice
tags:
- Websites
status: draft
type: post
published: false
meta:
  _yoast_wpseo_linkdex: '0'
  _edit_last: '1'
  _yoast_wpseo_focuskw: ''
  _yoast_wpseo_title: ''
  _yoast_wpseo_metadesc: ''
  _yoast_wpseo_meta-robots-noindex: '0'
  _yoast_wpseo_meta-robots-nofollow: '0'
  _yoast_wpseo_meta-robots-adv: none
  _yoast_wpseo_sitemap-include: ! '-'
  _yoast_wpseo_sitemap-prio: ! '-'
  _yoast_wpseo_canonical: ''
  _yoast_wpseo_redirect: ''
---
<p>
After deciding where we were headed with our mobile approach, it was time to actually do it. I really came in thinking it wouldn't be too much of a problem; sure I was ready to face some, but it turned out far more complicated than just throwing a bunch of media queries and praying.
</>

<h1>What went right</h1>

<h2>SASS = great</h2>

<p>
As I said in the previous article, I decided to use SASS for the first time on this project, and I'm super pleased+++ with the result. If there is one thing I strongly advocate, it's to start using a css preprocessor right now, and preferably SASS.
</p>

<h3>Moving to SASS</h3>

<p>
The learning curve was fairly simple. I started by converting all my plain css to SASS synthax. Not that many things changed in the first place. Gradeints and css3 in general got a big win.
</p>

<pre>
#mydiv{
  //before SASS
  background: -moz-linear-gradient(top,  rgba(255,255,255,1) 0%, rgba(255,255,255,0.5) 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0.5))); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0.5) 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0.5) 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top,  rgba(255,255,255,1) 0%,rgba(255,255,255,0.5) 100%); /* IE10+ */
  background: linear-gradient(to bottom,  rgba(255,255,255,1) 0%,rgba(255,255,255,0.5) 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#80ffffff',GradientType=0 ); /* IE6-9 */

  //after SASS
  @include background(linear-gradient(top, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0)));
}
</pre>

<p>
I threw in some variables too so I wouldn't repeat myself over and over again, especially regarding fonts. I only wrote a couple of mixins myself, most of them are provided by compass anyway. I did write one that I used a lot, and it handles font sizing. I use the <em>rem</em> unit (for root em) all over the place. It's fantastic - it works just like ems, except it isn't affected by the cascade. So 1rem is <b>always</b> 1rem, no matter how many times you defined that zize prior to that.
</p>

<p>
The support for <a href="http://caniuse.com/#search=rem">rem</a> is really good, but unfortunately IE8 isn't on the list- and I had to support it. There is a little trick where you set the base font-size so that 1rem=10px, and then you always define your font-size twice with almost the same value, once for rem, once for pixels :
</p>

<pre>
//set 1rem=10px
html{
  font-size: 62.5%;
}

//from now on you use this to define a font size
#mydiv{
  font-size: 20px;
  font-size: 2rem;
}

//my mixin
@mixin font-size($pxsize){
  font-size: #{$pxsize}px;
  font-size: #{$pxsize/10}rem;
}

//so now
#mydiv{
  @include font-size(20);
}
</pre>

<p>
The mixin is not very impressive, but it keeps you from forgetting to add the pixel value at some points (as had happened to me before moving to SASS).
</p>

<h3>File organization</h3>

<p>
A while later, I did a second pass in this time dealt with code repetitions and made more important changes. I created a <em>_core.scss</em> file, that produces 0 output - it only loads compass, defines all core variables like fonts or colors and creates my custom mixins. Also included are 2 <a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#placeholder_selectors_">placeholder selectors</a>, one for image replacement and one for submit buttons.
</p>

<p>
Then I have a _base.css with... well, basic css definitons and utility classes. This in turn is requested byafile nammed common.scss (along with normalize.scss). common.scss is then included in every page of the site, as it handles elements that can be found anywhere (header, footer, etc.).
</p>

<p>
And finally, every other set of pages has its own scss file that is loaded only on the pages were it's needed. Those files don't actually contain much scss, because most of the time the pages display smaller modules (like news boxes, sliders, menus). And those modules in turn are SASS partials. So a common scss file actually looks like this :
</p>

<pre>
$couleur-programme: #07acad;
$lateral-menu-color: #fff;
$lateral-menu-background: #005b61;
$lateral-menu-border: 2px dotted #fff;
$lateral-menu-link-color: #fff;
$lateral-menu-active-color: #b6ffff;
$next-page-color: #fff;
$next-page-arrow-color: $couleur-programme;
$slides-width: 720px;
$concours-background: #706a62;
$rencontreznous-titre-background: #dabd03;
$rencontreznous-background: #0d9697;
$rencontreznous-lieu-color: #ffdd00;
$rencontreznous-border-color: #ffffff;
$mobile-header-background: $couleur-programme;

@import "core";
@import "partials/lateralmenu";
@import "partials/mobileheader";
@import "partials/news";
@import "partials/rencontreznous";
@import "partials/slides";
@import "partials/nextpage";
@import "programmes";
@import "associations";
@import "concours";
@import "cours";
@import "double-diplomes";
@import "drapeaux";

//followed by more or less 50 lines of really specefic css.
</pre>

<h2>Grids</h2>

<p>
</p>

<h1>What went wrong</h1>

<h2>Testing is a mess</h2>

<p>
While coding, I used firefoxs responsive design view to see how the webpages were rendered on smaller resolutions. It's a really handy tool, with presets for the most common screen resolutions, and it's easy to use in combination with the inspector. The only problem with it is that it obviously uses its own rendering engine, which is widely different from what you will find on mobile. When I thought I was done, i started my firefox browser on my smartphone... and discovered that a lot of things were broken.
</p>

<p>
In the end it was mostly problems with a few not-so-much supported properties like fixed positioning. But bottom line is, you absolutely need to test your website on the actual devices to detect problems, resizing the window is not enough. Personally I ended up scavenging around in the offices to find a couple of phones I could borrow for an afternoon but if you're on your own, you probably don't have that option. 
</p>

<p>
I haven't tested tools like <a href="http://www.browserstack.com/">browserstack</a>, but I definitely think they are worth a try.Not so much for the IE testing (come on, it's not that bad), but for cross platform mobile testing.
</p>

<p>
 I downloaded <a href="http://html.adobe.com/edge/inspect/">Adobe Edge Inspect</a> as well, but haven't given it a shot yet. You still need the different devices for Inspect to work, but a DOM inspector on the phone would be greatly appreciated. I read about the <a href="https://hacks.mozilla.org/2012/08/remote-debugging-on-firefox-for-android/">firefox remote debugging</a>, and it's exciting - but I really wish that would be an inspector rather than a debugger.
</p>


<h2>Responsive images &amp; sprites</h2>
The responsive image problem is all too well known, no need to talk about it much here.

The other problem I encountered witch seems to be mostly uncovered is sprites and responsive designs. I had a couple of pages where I had used sprited images to avoid extra requests and optimize page laod time. But of course those sprites have a fixed dimension, so when you start scaling down the container element, the sprited element doesn't scale at all.
<h2>Flyout</h2>
The facebook-style flyout menu was what caused the most trouble.
<h2>Tel links and apps</h2>
Tel links are an awesome idea.You justgo with

&lt;a href="tel:0123456789"&gt;0123456789&lt;/a&gt;

and when tapped on a phone, it starts the call. That's exactly what you want to do with a phone number on a mobile website.

BUT not on a browser. Except if you're using skype as your phone, you probably won't start a call from your desktop browser or laptop. The problem here is instead of doing something acceptable with the link, desktop browsers sends you to an error page. What I'd personnaly think would make sense here is...do nothing. If the device can't handle calls, then just ignore the damn link. Or maybe inform the user in some way, but don't just throw an error message.

The problem can be extended to other kind of links. What about a link to a facebook page? On my phone, I use the native facebook app, I'm not even logged in on the mobile website. So when I click a facebook link on a website from my phone, I'd actually would like to be taken to the facebook app, not mobile website. Same goes for twitter, or more generic things like maps or videos.

THings are a bit shaky right now.

+page de test

Some times the browser says where users are redirected, sometimes the OS does it. Both make sense; what's important is that the user can choose how things get handled. And for us webdevs to tell the browser or the OS that we want a given link to open whatever the user has decided is the best, and not force an app of a website.

I think the best solution here is something that allready exists: links with specific protocols, like spotify:the-link or magnet:the-link. As a user you can easily tell the browser what to do with what protocol. It works great on desktop, I can't see why it wouldn't on mobile. TO me, we are missing 2 kind of tools here : one is when we want a link to a specific service, like spotify or facebook. In this case it probably makes sense to use a "proprietary", explicit protocol like facebook:or spotify:. The other use case is a link to something more generic, that different apps or websites could handdle, like an adress. In that case we could use a generic protocol, like address: and the browsers redirects you to google maps, navigation, plans, or whetever you choose. Pretty much the same idea as tel links, but extended to other use cases.

+ parler article frost?

&nbsp;
