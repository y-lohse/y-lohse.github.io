---
layout: post
title: HTML5 audio & video stream
tags:
- HTML5 lab
status: draft
type: post
published: false
---
I've been toying around a little with the getUserMedia() functions, and thought I'd share a couple of tricks with you. The <a href="http://www.html5rocks.com/en/tutorials/getusermedia/intro/?redirect_from_locale=fr">HTML5 rocks article</a> is reakky good, but here are 2 others tricks.

Before we start, jsut a reminder that the getUserMedia API's are, as far as I know, onlyavailable in the latest builds. This means that if you want the demos to work, you'll need <a href="http://nightly.mozilla.org/">firefox nightly</a> or <a href="https://www.google.com/intl/en/chrome/browser/canary.html">chrome canary</a>.And a webcam.
Also, in Firefox Nightly, you'll need to go to about:config and set the <code>media.navigator.enabled</code> flag to true.
<h1>Cross Browser please</h1>
Apparently, the getUserMedia specs have changed at some point, and since then different browsers have slightly different implementations. Basically, it should work somewhat like this:

[prettify]

navigator.getUserMedia({video: true}, function(stream){
//in case of success
videoElement.src = stream;
}, function(){
//in case of failure
});

[/prettify]

where <em>videoElement</em> is a reference to a &lt;video&gt; element inside the page. Unfortunately, at least Chrome seems to be using an older version of the specs, where the stream parameter is not an actual object, but a string. If you use the code above in Chrome, the webcam will start, but you won't get any image.

The solution is explained in the HTML5 rocks article, you need to create an Object URL with <code>window.URL.createObjectURL</code>. And <em>that </em>fails
